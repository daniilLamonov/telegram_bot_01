# Telegram Bot для управления балансами

Бот для управления балансами пользователей в RUB и USDT с комиссиями и экспортом в Excel.

## Требования

- Docker
- Docker Compose

## Быстрый запуск

### 1. Клонирование/Получение проекта

Распакуйте архив проекта на сервере.

### 2. Настройка переменных окружения

Скопируйте `.env.example` в `.env`:


``` 
cp .env.example .env
``` 

Откройте `.env` и заполните:
- `BOT_TOKEN` - токен вашего Telegram бота (получить у @BotFather)
- `DB_PASSWORD` - придумайте надежный пароль для БД
- Остальные параметры можно оставить по умолчанию

### 3. Запуск

Запустите проект командой:

```
docker-compose up -d --build
```



### 4. Проверка статуса

Убедитесь, что контейнеры запущены:
```
docker-compose ps
```


Посмотреть логи бота:
```
docker-compose logs -f tg_bot
```

## Остановка и управление

Остановить бота:
```
docker-compose down
```



Перезапустить бота:
```docker-compose restart tg_bot```

Обновить код и перезапустить:
```
docker-compose down
docker-compose up -d --build
```


## Команды бота

- `/start` - Приветствие и список команд
- `/init` - Инициализация чата (установка контрагента)
- `/get <сумма>` - Пополнить баланс ₽
- `/gets <сумма>` - Пополнить баланс USDT
- `/ch <курс> <сумма>` - Обменять ₽ на USDT
- `/payr <сумма>` - Вывести ₽ (с комиссией)
- `/pays <сумма>` - Вывести USDT (с комиссией)
- `/bal` - Показать баланс
- `/h` - История операций
- `/new <процент>` - Установить комиссию
- `/check <сумма>` - Создать чек
- `/export` - Экспортировать данные в Excel

## Бэкапы

Для создания резервной копии БД:
```docker exec database pg_dump -U bot_user bot_db > backup.sql```

Для восстановления:
```docker exec -i database psql -U bot_user bot_db < backup.sql```



